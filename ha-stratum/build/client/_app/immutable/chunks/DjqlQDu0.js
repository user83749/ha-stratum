import{b as c,a as X,f as u,d as ra}from"./CHLJW1vT.js";import{p as oa,d as i,g as a,r,c as d,t as B,b as la,X as s,s as va,Y as ca,n as da,e as Y}from"./BFobMjM6.js";import{s as I}from"./CbAumXQD.js";import{i as f}from"./DtaZhLEA.js";import{f as ua,g as _a}from"./CoH-M4O8.js";import{I as y,B as j}from"./pOHzWP0b.js";var pa=u('<span class="spinner svelte-14ubg71"><!></span>'),fa=u('<span class="version-line svelte-14ubg71"><span class="old-ver svelte-14ubg71"> </span> <!> <span class="new-ver svelte-14ubg71"> </span></span>'),ba=u('<span class="version-label svelte-14ubg71"> </span>'),ga=u('<span class="up-to-date svelte-14ubg71">Up to date</span> <!>',1),ma=u('<span class="auto-badge svelte-14ubg71">Auto</span>'),ya=u('<button class="skip-btn svelte-14ubg71" aria-label="Skip version"><!></button>'),ha=u('<div class="actions svelte-14ubg71"><button class="install-btn svelte-14ubg71" aria-label="Install update"><!><span>Install</span></button> <!></div>'),ka=u('<div class="update-tile svelte-14ubg71"><div class="icon-wrap svelte-14ubg71"><!></div> <div class="info svelte-14ubg71"><span class="name svelte-14ubg71"> </span> <!> <!></div> <!></div>');function Sa(q,o){oa(o,!0);const D=s(()=>o.tile.config),z=s(()=>o.tile.layout?.w??o.tile.size?.w??1),U=s(()=>o.tile.layout?.h??o.tile.size?.h??1),h=s(()=>a(z)>=4&&a(U)>=3?"xl":a(z)>=3&&a(U)>=2?"lg":a(z)>=2||a(U)>=2?"md":"sm"),k=s(()=>o.entity?.entity_id??o.tile.entity_id??""),E=s(()=>o.entity?.state??"off"),p=s(()=>o.entity?.attributes??{}),F=s(()=>a(D).name??a(p).friendly_name??"Update"),b=s(()=>a(E)==="on"),V=s(()=>a(p).installed_version??""),C=s(()=>a(p).latest_version??""),H=s(()=>a(p).in_progress??!1),G=s(()=>a(p).auto_update??!1),J=s(()=>a(p).skipped_version??""),K=s(()=>a(b)?"var(--color-info)":"var(--color-on)");let w=va(!1);const T=s(()=>a(h)!=="sm"),L=s(()=>(a(h)==="lg"||a(h)==="xl")&&a(b)&&!a(H)&&!a(w));async function M(){if(!(!a(k)||!a(b))){Y(w,!0);try{await j("update","install",{},{entity_id:a(k)})}catch{}finally{Y(w,!1)}}}function N(){a(k)&&j("update","skip",{},{entity_id:a(k)})}var g=ka(),S=i(g),O=i(S);{var Q=t=>{var e=pa(),n=i(e);y(n,{name:"loader"}),r(e),c(t,e)},R=t=>{{let e=s(()=>a(b)?"arrow-up-circle":"check-circle");y(t,{get name(){return a(e)}})}};f(O,t=>{a(H)||a(w)?t(Q):t(R,!1)})}r(S);var A=d(S,2),P=i(A),Z=i(P,!0);r(P);var W=d(P,2);{var $=t=>{var e=fa(),n=i(e),m=i(n,!0);r(n);var l=d(n,2);y(l,{name:"arrow-right",size:10});var v=d(l,2),_=i(v,!0);r(v),r(e),B(()=>{I(m,a(V)),I(_,a(C))}),c(t,e)},aa=t=>{var e=ga(),n=d(ca(e),2);{var m=l=>{var v=ba(),_=i(v,!0);r(v),B(()=>I(_,a(V))),c(l,v)};f(n,l=>{a(T)&&a(V)&&l(m)})}c(t,e)};f(W,t=>{a(b)&&a(T)?t($):t(aa,!1)})}var ta=d(W,2);{var ea=t=>{var e=ma();c(t,e)};f(ta,t=>{a(G)&&t(ea)})}r(A);var sa=d(A,2);{var na=t=>{var e=ha(),n=i(e),m=i(n);y(m,{name:"download"}),da(),r(n);var l=d(n,2);{var v=_=>{var x=ya(),ia=i(x);y(ia,{name:"skip-forward"}),r(x),X("click",x,N),c(_,x)};f(l,_=>{a(J)!==a(C)&&_(v)})}r(e),X("click",n,M),c(t,e)};f(sa,t=>{a(L)&&t(na)})}r(g),B(()=>{ua(g,"data-size",a(h)),_a(g,`--uc: ${a(K)??""};`),I(Z,a(F))}),c(q,g),la()}ra(["click"]);export{Sa as default};
