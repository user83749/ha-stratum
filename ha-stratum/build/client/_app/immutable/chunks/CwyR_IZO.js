import{b as z,f as H,g as Re,a as L,d as Se}from"./CHLJW1vT.js";import{p as We,d as n,g as e,r as a,c as r,t as C,b as Xe,X as s,n as je,s as P,e as p}from"./BFobMjM6.js";import{s as ee}from"./CbAumXQD.js";import{i as B}from"./DtaZhLEA.js";import{s as O,f as G,g as ge,r as _e,i as he}from"./CoH-M4O8.js";import{I,l as te}from"./pOHzWP0b.js";var qe=Re('<svg viewBox="0 0 50 50" class="hue-svg svelte-1sgomoi"><path class="bulb-base svelte-1sgomoi" d="M27.4 47.3h-4.9s-.7.1-.7.8.4.9.7.9h4.9c.3 0 .7-.1.7-.9s-.7-.8-.7-.8zm3.3-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-3H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9s-.9-.8-.9-.8zm5.2-23.2c-3.3-5.3-7-5.6-10.9-5.6-3.8 0-8.4.4-10.9 5.6-.1.1-.1.3.1.7.4.8 3.3 7.2 3.2 18.8 0 1.1-.1 1.6 0 1.7 0 .1 0 .7 1.1.7h13c1 0 1-.5 1.1-.7v-1.7c-.1-11.6 2.8-18 3.2-18.8.1-.4.1-.5.1-.7"></path><path d="M14.1 15.3c3.4-.3 7-.4 10.9-.4 3.8 0 7.5.2 10.9.4.4-.4.7-.8.9-1.1C39 8.5 38.9 6.5 38.9 6c-.2-4.4-8.4-5-12.1-5h0-3.4c-3.7 0-12 .5-12.1 5 0 .5-.1 2.5 2.1 8.2 0 .3.3.8.7 1.1z"></path></svg>'),Ae=H('<div><svg viewBox="0 0 50 50" class="circle-svg svelte-1sgomoi"><circle id="circle_stroke" cx="25" cy="25" r="22.1" stroke-dasharray="138.85"></circle><text id="circle_value" x="50%" y="52%" class="circle-value svelte-1sgomoi"> <tspan dx=".2" dy="-.4" class="svelte-1sgomoi">%</tspan></text></svg></div>'),De=H('<div class="slider-row svelte-1sgomoi"><!> <div class="slim-track svelte-1sgomoi"><div class="slim-fill svelte-1sgomoi"></div> <input type="range" min="1" max="100" step="1" aria-label="Brightness" class="svelte-1sgomoi"/></div> <!></div>'),Ee=H('<div class="slider-row svelte-1sgomoi"><!> <div class="slim-track ct-track svelte-1sgomoi"><input type="range" step="1" aria-label="Color temperature" class="svelte-1sgomoi"/></div> <!></div>'),Fe=H('<div class="sliders-panel svelte-1sgomoi"><!> <!></div>'),Je=H('<div><div class="tile-content svelte-1sgomoi"><div class="top svelte-1sgomoi"><div><!></div></div> <div class="bottom svelte-1sgomoi"><span class="name-text svelte-1sgomoi"> </span> <span class="state-text svelte-1sgomoi"> </span></div></div> <!> <!></div>');function et(fe,c){We(c,!0);const se=s(()=>c.tile.config),R=s(()=>c.tile.layout?.w??c.tile.size?.w??1),S=s(()=>c.tile.layout?.h??c.tile.size?.h??1),W=s(()=>e(R)>=4&&e(S)>=3?"xl":e(R)>=3&&e(S)>=2?"lg":e(R)>=2||e(S)>=2?"md":"sm"),X=s(()=>e(se).icon??void 0),pe=s(()=>!e(X)||e(X)==="hue-light"),T=s(()=>c.entity?.entity_id??c.tile.entity_id??""),v=s(()=>c.entity?.attributes??{}),be=s(()=>e(se).name??e(v).friendly_name??"Light"),l=s(()=>c.entity?.state==="on"),ie=s(()=>e(v).brightness!==void 0?Math.round(e(v).brightness/255*100):null),N=s(()=>e(v).color_temp),b=s(()=>e(v).color_temp_kelvin),ne=s(()=>e(v).min_mireds??153),ae=s(()=>e(v).max_mireds??500),y=s(()=>e(v).min_color_temp_kelvin),k=s(()=>e(v).max_color_temp_kelvin),oe=s(()=>e(v).supported_color_modes??[]),j=s(()=>e(oe).some(t=>["brightness","color_temp","rgb","xy","hs"].includes(t))||e(ie)!==null),le=s(()=>e(oe).includes("color_temp")||e(N)!==void 0||e(b)!==void 0),xe=s(()=>e(j)&&e(l)),ye=s(()=>(e(W)==="lg"||e(W)==="xl")&&e(l)&&(e(j)||e(le))),K=s(()=>e(v).rgb_color);function q(t,i,d){return Math.round(t+(i-t)*d)}function ke(t,i,d){const m=Math.max(1,d-i),g=Math.max(0,Math.min(1,(t-i)/m)),f=[165,77,35],o=[238,244,255],u=q(o[0],f[0],g),x=q(o[1],f[1],g),_=q(o[2],f[2],g);return`rgb(${u}, ${x}, ${_})`}function A(t){return Math.round(1e6/Math.max(t,1))}const Me=s(()=>e(K)?`rgb(${e(K)[0]},${e(K)[1]},${e(K)[2]})`:e(l)&&(e(N)!==void 0||e(b)!==void 0)?ke(e(N)??A(e(b)??4e3),e(y)?A(e(y)):e(ne),e(k)?A(e(k)):e(ae)):e(l)?"var(--fg)":"var(--fg-muted)");let D=P(null),E=P(null),F=P(!1),J=P(!1);const Q=s(()=>e(F)?e(D):e(ie)),re=s(()=>e(J)?e(E):e(N)??e(b)??null),U=s(()=>e(Q)??(e(l)?100:0));function we(t){p(F,!0),p(D,Number(t.target.value),!0)}function ze(t){p(F,!1);const i=Number(t.target.value);p(D,null),e(T)&&te.turnOn(e(T),{brightness_pct:i})}function Te(t){p(J,!0),p(E,Number(t.target.value),!0)}function Ce(t){p(J,!1);const i=Number(t.target.value);if(p(E,null),!!e(T)){if(e(b)!==void 0||e(y)!==void 0||e(k)!==void 0){te.turnOn(e(T),{color_temp_kelvin:i});return}te.turnOn(e(T),{color_temp:i})}}var M=Je();let ce;var V=n(M),Y=n(V),Z=n(Y);let ve;var Be=n(Z);{var Oe=t=>{var i=qe(),d=r(n(i));let m;a(i),C(()=>m=O(d,0,"light-color svelte-1sgomoi",null,m,{"hue-on":e(l)})),z(t,i)},Ie=t=>{{let i=s(()=>e(X)??"lightbulb");I(t,{get name(){return e(i)},get entity(){return c.entity}})}};B(Be,t=>{e(pe)?t(Oe):t(Ie,!1)})}a(Z),a(Y);var de=r(Y,2),$=n(de),He=n($,!0);a($);var ue=r($,2),Ne=n(ue,!0);a(ue),a(de),a(V);var me=r(V,2);{var Ke=t=>{var i=Ae();let d;var m=n(i),g=n(m);let f;var o=r(g),u=n(o,!0);je(),a(o),a(m),a(i),C(()=>{d=O(i,1,"circle-wrap svelte-1sgomoi",null,d,{on:e(l)}),f=O(g,0,"circle-stroke svelte-1sgomoi",null,f,{on:e(l)}),G(g,"stroke-dashoffset",e(l)?138.85-(e(Q)??100)/100*138.85:138.85),ee(u,e(l)?e(Q)??100:0)}),z(t,i)};B(me,t=>{e(xe)&&t(Ke)})}var Le=r(me,2);{var Pe=t=>{var i=Fe(),d=n(i);{var m=o=>{var u=De(),x=n(u);I(x,{name:"sun-dim",size:12});var _=r(x,2),h=n(_),w=r(h,2);_e(w),a(_);var Ge=r(_,2);I(Ge,{name:"sun",size:12}),a(u),C(()=>{ge(h,`width:${e(U)??""}%`),he(w,e(U))}),L("input",w,we),L("change",w,ze),z(o,u)};B(d,o=>{e(j)&&o(m)})}var g=r(d,2);{var f=o=>{var u=Ee(),x=n(u);I(x,{name:"flame",size:12});var _=r(x,2),h=n(_);_e(h),a(_);var w=r(_,2);I(w,{name:"snowflake",size:12}),a(u),C(()=>{G(h,"min",e(b)!==void 0||e(y)!==void 0||e(k)!==void 0?e(y)??2e3:e(ne)),G(h,"max",e(b)!==void 0||e(y)!==void 0||e(k)!==void 0?e(k)??6500:e(ae)),he(h,e(re))}),L("input",h,Te),L("change",h,Ce),z(o,u)};B(g,o=>{e(le)&&e(re)!==null&&o(f)})}a(i),z(t,i)};B(Le,t=>{e(ye)&&t(Pe)})}a(M),C(()=>{ce=O(M,1,"light-tile svelte-1sgomoi",null,ce,{on:e(l)}),G(M,"data-size",e(W)),ge(M,`--lc: ${e(Me)??""}; --bright: ${e(U)??""}%;`),ve=O(Z,1,"hue-icon-wrap svelte-1sgomoi",null,ve,{on:e(l)}),ee(He,e(be)),ee(Ne,e(l)?"On":"Off")}),z(fe,M),Xe()}Se(["input","change"]);export{et as default};
