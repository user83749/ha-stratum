import{b as l,f as o}from"./CHLJW1vT.js";import{p as G,d as f,g as t,r as m,t as c,b as I,X as e,Y as J,c as C}from"./BFobMjM6.js";import{s as H}from"./CbAumXQD.js";import{i as z}from"./DtaZhLEA.js";import{f as k}from"./CoH-M4O8.js";var K=o('<span class="overlay-coords svelte-6f9nr8"> </span>'),O=o('<div class="overlay-label svelte-6f9nr8"><span class="svelte-6f9nr8"> </span> <!></div>'),Q=o('<iframe loading="lazy" sandbox="allow-scripts allow-same-origin" class="svelte-6f9nr8"></iframe> <!>',1),R=o('<div class="empty svelte-6f9nr8">No location available</div>'),S=o('<div class="map-tile svelte-6f9nr8"><!></div>');function at(L,a){G(a,!0);const u=e(()=>a.tile.config),_=e(()=>a.tile.layout?.w??a.tile.size?.w??1),b=e(()=>a.tile.layout?.h??a.tile.size?.h??1),n=e(()=>t(_)>=4&&t(b)>=3?"xl":t(_)>=3&&t(b)>=2?"lg":t(_)>=2||t(b)>=2?"md":"sm"),F=e(()=>t(u).name??a.entity?.attributes?.friendly_name??"Map"),s=e(()=>a.entity?.attributes?.latitude??t(u).latitude),i=e(()=>a.entity?.attributes?.longitude??t(u).longitude),N=e(()=>t(n)!=="sm"),P=e(()=>(t(n)==="lg"||t(n)==="xl")&&t(s)!==void 0&&t(i)!==void 0),M=e(()=>t(s)===void 0||t(i)===void 0?"":`https://www.openstreetmap.org/export/embed.html?bbox=${t(i)-.01},${t(s)-.01},${t(i)+.01},${t(s)+.01}&layer=mapnik&marker=${t(s)},${t(i)}`);var d=S(),T=f(d);{var U=r=>{var v=Q(),p=J(v),X=C(p,2);{var Y=g=>{var y=O(),x=f(y),j=f(x,!0);m(x);var q=C(x,2);{var A=h=>{var w=K(),B=f(w);m(w),c((D,E)=>H(B,`${D??""}, ${E??""}`),[()=>t(s)?.toFixed(3),()=>t(i)?.toFixed(3)]),l(h,w)};z(q,h=>{t(P)&&h(A)})}m(y),c(()=>H(j,t(F))),l(g,y)};z(X,g=>{t(N)&&g(Y)})}c(()=>{k(p,"src",t(M)),k(p,"title",`${t(F)??""} map`)}),l(r,v)},W=r=>{var v=R();l(r,v)};z(T,r=>{t(M)?r(U):r(W,!1)})}m(d),c(()=>k(d,"data-size",t(n))),l(L,d),I()}export{at as default};
