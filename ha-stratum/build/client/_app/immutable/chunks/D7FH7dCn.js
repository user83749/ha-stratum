import{b as u,a as q,f as m,d as vt}from"./CHLJW1vT.js";import{p as ct,s as E,a as ut,C as mt,g as t,e as c,d as n,r as o,c as p,t as w,b as _t,X as i}from"./BFobMjM6.js";import{s as H}from"./CbAumXQD.js";import{i as x}from"./DtaZhLEA.js";import{I as L,e as ft,D as F}from"./pOHzWP0b.js";import{f as G,s as J,r as pt}from"./CoH-M4O8.js";import{b as yt}from"./CC__ImFt.js";var bt=m('<span class="count svelte-1194dia"> </span>'),ht=m('<div class="empty svelte-1194dia">Loading…</div>'),gt=m('<div class="empty svelte-1194dia">Nothing to do!</div>'),kt=m('<button><span><!></span> <span class="summary svelte-1194dia"> </span></button>'),wt=m('<div class="items svelte-1194dia"></div>'),xt=m('<div class="add-row svelte-1194dia"><input type="text" placeholder="Add task…" class="add-input svelte-1194dia"/> <button class="add-btn svelte-1194dia" aria-label="Add"><!></button></div>'),It=m('<div class="todo-tile svelte-1194dia"><div class="header svelte-1194dia"><div class="icon-bubble svelte-1194dia"><!></div> <span class="title svelte-1194dia"> </span> <!></div> <!> <!></div>');function Et(K,d){ct(d,!0);const N=i(()=>d.tile.config),I=i(()=>d.tile.layout?.w??d.tile.size?.w??1),z=i(()=>d.tile.layout?.h??d.tile.size?.h??1),_=i(()=>t(I)>=4&&t(z)>=3?"xl":t(I)>=3&&t(z)>=2?"lg":t(I)>=2||t(z)>=2?"md":"sm"),y=i(()=>d.entity?.entity_id??d.tile.entity_id??""),M=i(()=>d.entity?.attributes??{}),O=i(()=>t(N).name??t(M).friendly_name??"To-do");let b=E(ut([])),h=E(!0),f=E("");mt(()=>{if(d.entity,!t(y)){c(h,!1);return}c(h,!0);const e=d.entity?.attributes?.items;e?(c(b,e,!0),c(h,!1)):c(h,!1)});function Q(e){if(!t(y))return;const a=e.status==="completed"?"needs_action":"completed";c(b,t(b).map(s=>s.uid===e.uid?{...s,status:a}:s),!0),F.updateItem(t(y),e.summary,a)}function P(){if(!t(f).trim()||!t(y))return;const e=t(f).trim();c(f,""),F.addItem(t(y),e)}const R=i(()=>t(b).filter(e=>e.status==="needs_action")),U=i(()=>t(N).show_completed!==!1),T=i(()=>t(U)?t(b):t(R)),W=i(()=>t(_)==="sm"?t(T).slice(0,2):t(_)==="md"?t(T).slice(0,4):t(T)),V=i(()=>t(_)!=="sm"),Y=i(()=>t(_)==="lg"||t(_)==="xl");var g=It(),A=n(g),C=n(A),Z=n(C);L(Z,{name:"check-square",size:16}),o(C);var D=p(C,2),$=n(D,!0);o(D);var tt=p(D,2);{var et=e=>{var a=bt(),s=n(a);o(a),w(()=>H(s,`${t(R).length??""} left`)),u(e,a)};x(tt,e=>{t(V)&&e(et)})}o(A);var X=p(A,2);{var at=e=>{var a=ht();u(e,a)},st=e=>{var a=gt();u(e,a)},it=e=>{var a=wt();ft(a,21,()=>t(W),s=>s.uid,(s,l)=>{var r=kt();let v;var k=n(r);let j;var ot=n(k);{var nt=S=>{L(S,{name:"check",size:10})};x(ot,S=>{t(l).status==="completed"&&S(nt)})}o(k);var B=p(k,2),rt=n(B,!0);o(B),o(r),w(()=>{v=J(r,1,"todo-item svelte-1194dia",null,v,{done:t(l).status==="completed"}),G(r,"aria-label",t(l).summary),j=J(k,1,"checkbox svelte-1194dia",null,j,{checked:t(l).status==="completed"}),H(rt,t(l).summary)}),q("click",r,()=>Q(t(l))),u(s,r)}),o(a),u(e,a)};x(X,e=>{t(h)?e(at):t(W).length===0?e(st,1):e(it,!1)})}var dt=p(X,2);{var lt=e=>{var a=xt(),s=n(a);pt(s);var l=p(s,2),r=n(l);L(r,{name:"plus",size:16}),o(l),o(a),w(v=>l.disabled=v,[()=>!t(f).trim()]),q("keydown",s,v=>{v.key==="Enter"&&P()}),yt(s,()=>t(f),v=>c(f,v)),q("click",l,P),u(e,a)};x(dt,e=>{t(Y)&&e(lt)})}o(g),w(()=>{G(g,"data-size",t(_)),H($,t(O))}),u(K,g),_t()}vt(["click","keydown"]);export{Et as default};
