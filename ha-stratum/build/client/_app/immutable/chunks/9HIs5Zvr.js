import{b as u,f as _,a as y,d as ht}from"./CHLJW1vT.js";import{p as zt,s as yt,a as qt,C as jt,g as t,e as wt,d as r,r as n,c as m,t as k,b as xt,X as e,Y as J}from"./BFobMjM6.js";import{s as C}from"./CbAumXQD.js";import{i as q}from"./DtaZhLEA.js";import{f as St,g as K}from"./CoH-M4O8.js";import{I as p,C as j}from"./pOHzWP0b.js";var kt=_('<span class="status-label svelte-19zvq5j"> </span>'),Ct=_('<span class="finish-line svelte-19zvq5j"> </span>'),It=_('<button class="ctrl-btn svelte-19zvq5j" aria-label="Pause"><!></button> <button class="ctrl-btn danger svelte-19zvq5j" aria-label="Cancel"><!></button>',1),Mt=_('<button class="ctrl-btn primary svelte-19zvq5j" aria-label="Resume"><!></button> <button class="ctrl-btn danger svelte-19zvq5j" aria-label="Cancel"><!></button>',1),Pt=_('<button class="ctrl-btn primary svelte-19zvq5j" aria-label="Start"><!></button>'),Tt=_('<div class="controls svelte-19zvq5j"><!></div>'),At=_('<div class="progress-bar svelte-19zvq5j"><div class="progress-fill svelte-19zvq5j"></div></div>'),Dt=_('<div class="timer-tile svelte-19zvq5j"><div class="top svelte-19zvq5j"><div class="icon-sq svelte-19zvq5j"><!></div> <!></div> <div class="time-hero svelte-19zvq5j"><span class="time-text svelte-19zvq5j"> </span></div> <span class="name-small svelte-19zvq5j"> </span> <!> <!> <!></div>');function Wt(O,o){zt(o,!0);const Q=e(()=>o.tile.config),I=e(()=>o.tile.layout?.w??o.tile.size?.w??1),M=e(()=>o.tile.layout?.h??o.tile.size?.h??1),b=e(()=>t(I)>=4&&t(M)>=3?"xl":t(I)>=3&&t(M)>=2?"lg":t(I)>=2||t(M)>=2?"md":"sm"),l=e(()=>o.entity?.entity_id??o.tile.entity_id??""),w=e(()=>o.entity?.attributes??{}),U=e(()=>t(Q).name??t(w).friendly_name??"Timer"),H=e(()=>o.entity?.state??"idle"),g=e(()=>t(H)==="active"),x=e(()=>t(H)==="paused"),N=e(()=>t(w).duration??"0:00:00"),V=e(()=>t(w).remaining??t(N)),h=e(()=>t(w).finishes_at);let R=yt(qt(Date.now()));jt(()=>{if(!t(g))return;const a=setInterval(()=>{wt(R,Date.now(),!0)},1e3);return()=>clearInterval(a)});function W(a){const s=a.split(":").map(Number);return(s[0]??0)*3600+(s[1]??0)*60+(s[2]??0)}function Z(a){const s=Math.floor(a/3600),v=Math.floor(a%3600/60),S=a%60;return s>0?`${s}:${String(v).padStart(2,"0")}:${String(S).padStart(2,"0")}`:`${v}:${String(S).padStart(2,"0")}`}const X=e(()=>t(g)&&t(h)?Math.max(0,Math.round((new Date(t(h)).getTime()-t(R))/1e3)):W(t(V))),P=e(()=>W(t(N))),$=e(()=>t(P)>0?Math.max(0,Math.min(100,(1-t(X)/t(P))*100)):0),tt=e(()=>t(g)?"var(--accent)":t(x)?"var(--color-warning)":"var(--fg-muted)"),at=e(()=>t(g)?"var(--control-active-name)":t(x)?"var(--color-warning)":"var(--fg)"),et=e(()=>t(g)?"Active":t(x)?"Paused":"Idle"),st=e(()=>t(b)!=="sm"),rt=e(()=>t(b)!=="sm"),nt=e(()=>t(b)!=="sm"&&t(P)>0),it=e(()=>(t(b)==="lg"||t(b)==="xl")&&!!t(h)),ot=e(()=>t(h)?new Date(t(h)).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}):"");var z=Dt(),T=r(z),A=r(T),lt=r(A);p(lt,{name:"timer"}),n(A);var vt=m(A,2);{var ct=a=>{var s=kt(),v=r(s,!0);n(s),k(()=>C(v,t(et))),u(a,s)};q(vt,a=>{t(st)&&a(ct)})}n(T);var D=m(T,2),Y=r(D),dt=r(Y,!0);n(Y),n(D);var L=m(D,2),ut=r(L,!0);n(L);var B=m(L,2);{var mt=a=>{var s=Ct(),v=r(s);n(s),k(()=>C(v,`Ends ${t(ot)??""}`)),u(a,s)};q(B,a=>{t(it)&&a(mt)})}var G=m(B,2);{var _t=a=>{var s=Tt(),v=r(s);{var S=d=>{var c=It(),i=J(c),E=r(i);p(E,{name:"pause"}),n(i);var f=m(i,2),F=r(f);p(F,{name:"x"}),n(f),y("click",i,()=>t(l)&&j.pause(t(l))),y("click",f,()=>t(l)&&j.cancel(t(l))),u(d,c)},gt=d=>{var c=Mt(),i=J(c),E=r(i);p(E,{name:"play"}),n(i);var f=m(i,2),F=r(f);p(F,{name:"x"}),n(f),y("click",i,()=>t(l)&&j.start(t(l))),y("click",f,()=>t(l)&&j.cancel(t(l))),u(d,c)},pt=d=>{var c=Pt(),i=r(c);p(i,{name:"play"}),n(c),y("click",c,()=>t(l)&&j.start(t(l))),u(d,c)};q(v,d=>{t(g)?d(S):t(x)?d(gt,1):d(pt,!1)})}n(s),u(a,s)};q(G,a=>{t(rt)&&a(_t)})}var ft=m(G,2);{var bt=a=>{var s=At(),v=r(s);n(s),k(()=>K(v,`width:${t($)??""}%`)),u(a,s)};q(ft,a=>{t(nt)&&a(bt)})}n(z),k(a=>{St(z,"data-size",t(b)),K(z,`--tc: ${t(tt)??""}; --tlc: ${t(at)??""};`),C(dt,a),C(ut,t(U))},[()=>Z(t(X))]),u(O,z),xt()}ht(["click"]);export{Wt as default};
