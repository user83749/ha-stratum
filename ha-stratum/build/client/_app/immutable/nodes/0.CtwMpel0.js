import{b as E,f as F}from"../chunks/CHLJW1vT.js";import{N,m as U,aO as q,ai as D,i as S,an as R,ao as M,y as $,x as L,z as j,am as B,p as H,C as k,aN as V,aP as K,g as w,e as i,U as T,b as Q,s as A,t as W,aw as Y,d as Z,r as G,aQ as J}from"../chunks/BFobMjM6.js";import{S as z,s as X}from"../chunks/T4f2iMYm.js";import{j as e0,l as t0,c as C,a as s0,k as m,d as o0,f as a0}from"../chunks/CoH-M4O8.js";import{s as g,a as r0}from"../chunks/CRHenurS.js";import{s as n0,g as _}from"../chunks/Cy1WpX7j.js";function l0(t,r){let e=null,s=S;var a;if(S){e=j;for(var o=B(document.head);o!==null&&(o.nodeType!==R||o.data!==t);)o=M(o);if(o===null)$(!1);else{var n=M(o);o.remove(),L(n)}}S||(a=document.head.appendChild(N()));try{U(()=>r(a),q|D)}finally{s&&($(!0),L(e))}}const i0=()=>{const t=n0;return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},c0={subscribe(t){return i0().page.subscribe(t)}},d0="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='107'%20height='128'%20viewBox='0%200%20107%20128'%3e%3ctitle%3esvelte-logo%3c/title%3e%3cpath%20d='M94.157%2022.819c-10.4-14.885-30.94-19.297-45.792-9.835L22.282%2029.608A29.92%2029.92%200%200%200%208.764%2049.65a31.5%2031.5%200%200%200%203.108%2020.231%2030%2030%200%200%200-4.477%2011.183%2031.9%2031.9%200%200%200%205.448%2024.116c10.402%2014.887%2030.942%2019.297%2045.791%209.835l26.083-16.624A29.92%2029.92%200%200%200%2098.235%2078.35a31.53%2031.53%200%200%200-3.105-20.232%2030%2030%200%200%200%204.474-11.182%2031.88%2031.88%200%200%200-5.447-24.116'%20style='fill:%23ff3e00'/%3e%3cpath%20d='M45.817%20106.582a20.72%2020.72%200%200%201-22.237-8.243%2019.17%2019.17%200%200%201-3.277-14.503%2018%2018%200%200%201%20.624-2.435l.49-1.498%201.337.981a33.6%2033.6%200%200%200%2010.203%205.098l.97.294-.09.968a5.85%205.85%200%200%200%201.052%203.878%206.24%206.24%200%200%200%206.695%202.485%205.8%205.8%200%200%200%201.603-.704L69.27%2076.28a5.43%205.43%200%200%200%202.45-3.631%205.8%205.8%200%200%200-.987-4.371%206.24%206.24%200%200%200-6.698-2.487%205.7%205.7%200%200%200-1.6.704l-9.953%206.345a19%2019%200%200%201-5.296%202.326%2020.72%2020.72%200%200%201-22.237-8.243%2019.17%2019.17%200%200%201-3.277-14.502%2017.99%2017.99%200%200%201%208.13-12.052l26.081-16.623a19%2019%200%200%201%205.3-2.329%2020.72%2020.72%200%200%201%2022.237%208.243%2019.17%2019.17%200%200%201%203.277%2014.503%2018%2018%200%200%201-.624%202.435l-.49%201.498-1.337-.98a33.6%2033.6%200%200%200-10.203-5.1l-.97-.294.09-.968a5.86%205.86%200%200%200-1.052-3.878%206.24%206.24%200%200%200-6.696-2.485%205.8%205.8%200%200%200-1.602.704L37.73%2051.72a5.42%205.42%200%200%200-2.449%203.63%205.79%205.79%200%200%200%20.986%204.372%206.24%206.24%200%200%200%206.698%202.486%205.8%205.8%200%200%200%201.602-.704l9.952-6.342a19%2019%200%200%201%205.295-2.328%2020.72%2020.72%200%200%201%2022.237%208.242%2019.17%2019.17%200%200%201%203.277%2014.503%2018%2018%200%200%201-8.13%2012.053l-26.081%2016.622a19%2019%200%200%201-5.3%202.328'%20style='fill:%23fff'/%3e%3c/svg%3e",p0={none:"0px",sm:"4px",md:"8px",lg:"12px",xl:"16px",full:"9999px"},y0={sm:"13px",md:"14px",lg:"16px"};function f0(t){return z.find(e=>e.id===t.themeId)??z[0]}function b(t,r=!1){const e=document.documentElement,s=f0(t),a=s.colorScheme==="dark";e.classList.toggle("dark",a),e.classList.toggle("light",!a),e.style.setProperty("color-scheme",s.colorScheme);for(const[f,x]of Object.entries(s.tokens))e.style.setProperty(f,x);const o=t.radius??s.radius,n=p0[o]??"12px";e.style.setProperty("--radius",n),e.style.setProperty("--radius-sm",`calc(${n} * 0.6)`),e.style.setProperty("--radius-lg",`calc(${n} * 1.4)`);const h=t.font?.family??s.font.family,v=t.font?.size??s.font.size,c=`"${h}", system-ui, sans-serif`,p=y0[v]??"14px";e.style.setProperty("--font-family",c),e.style.setProperty("--font-size",p);const d=t.dense??s.dense??!1;e.style.setProperty("--tile-padding",d?"8px":"14px"),e.style.setProperty("--tile-gap",d?"6px":"10px");const l=!r&&(t.animations??s.animations??!0);e.style.setProperty("--transition",l?"150ms ease":"0ms"),e.style.setProperty("--transition-slow",l?"300ms ease":"0ms"),e.style.setProperty("--color-on",s.tokens["--color-on"]),e.style.setProperty("--color-off",s.tokens["--color-off"]),e.style.setProperty("--color-warning","#f59e0b"),e.style.setProperty("--color-danger","#ef4444"),e.style.setProperty("--color-info","#3b82f6"),e.classList.remove("vs-liquid","vs-sculpted","vs-vivid"),e.classList.add(`vs-${s.visualStyle}`),u0(e,s.visualStyle,a)}function u0(t,r,e){if(r==="liquid"){const s=e?"0.68":"0.86",a=e?"0 10px 26px rgba(0 0 0 / 0.24)":"0 10px 24px rgba(0 0 0 / 0.07)",o=e?"0 14px 34px rgba(0 0 0 / 0.30)":"0 14px 30px rgba(0 0 0 / 0.10)";t.style.setProperty("--tile-bg",`rgba(var(--surface-rgb) / ${s})`),t.style.setProperty("--tile-border","1px solid var(--border)"),t.style.setProperty("--tile-shadow",a),t.style.setProperty("--tile-backdrop","blur(18px) saturate(1.1)"),t.style.setProperty("--tile-active-shadow",a),t.style.setProperty("--tile-hover-shadow",o)}else if(r==="sculpted"){const s=e?"0 8px 20px rgba(0 0 0 / 0.22)":"0 8px 18px rgba(0 0 0 / 0.06)",a=e?"0 12px 28px rgba(0 0 0 / 0.28)":"0 12px 24px rgba(0 0 0 / 0.09)",o=e?"0 6px 16px rgba(0 0 0 / 0.18)":"0 6px 14px rgba(0 0 0 / 0.05)";t.style.setProperty("--tile-bg","var(--surface)"),t.style.setProperty("--tile-border","1px solid var(--border)"),t.style.setProperty("--tile-shadow",s),t.style.setProperty("--tile-backdrop","none"),t.style.setProperty("--tile-active-shadow",o),t.style.setProperty("--tile-hover-shadow",a)}else t.style.setProperty("--tile-bg","var(--surface)"),t.style.setProperty("--tile-border","1px solid var(--border)"),t.style.setProperty("--tile-shadow","none"),t.style.setProperty("--tile-backdrop","none"),t.style.setProperty("--tile-active-shadow","0 2px 8px rgba(0, 0, 0, 0.08)"),t.style.setProperty("--tile-hover-shadow","none")}function m0(t){const r=window.matchMedia("(prefers-color-scheme: dark)"),e=()=>{const s=t();b(s.theme,s.reducedMotion)};return r.addEventListener("change",e),()=>r.removeEventListener("change",e)}var g0=F('<link rel="icon"/>'),b0=F('<div style="font-family: var(--font-family); font-size: var(--font-size);" class="contents"><!></div>');function _0(t,r){H(r,!0);const e=()=>g(m,"$dashboardStore",n),s=()=>g(c0,"$page",n),a=()=>g(o0,"$connectionStatus",n),o=()=>g(C,"$configStore",n),[n,h]=r0(),v=["/connect"];let c=A(!1),p=!1,d=!1,l=A(null);k(()=>{b(e().theme,e().settings.reducedMotion)});let f=null;V(()=>{b(e().theme,e().settings.reducedMotion),f=m0(()=>({theme:e().theme,reducedMotion:e().settings.reducedMotion}))}),K(()=>{f?.()}),k(()=>{x()});async function x(){const y=v.includes(s().url.pathname);if(e0()){w(l)!=="demo"&&(t0(),i(c,!0),i(l,"demo")),y&&await _("/");return}if(w(l)==="demo"&&(i(c,!1),i(l,null)),!C.isConfigured()){i(c,!1),i(l,null),y||await _("/connect");return}if(a()==="error"){i(c,!1),i(l,null),y||await _("/connect");return}if(a()==="disconnected"&&!p){p=!0;try{const{hassUrl:u,token:I}=o();await s0(u,I)}finally{p=!1}}if(a()==="connected"&&!w(c)&&!d){d=!0;try{await m.load(),i(c,!0),i(l,"live"),b(T(m).theme,T(m).settings.reducedMotion)}finally{d=!1}}}var P=b0();l0("12qhfyh",y=>{var u=g0();W(()=>a0(u,"href",d0)),Y(()=>{J.title="Stratum"}),E(y,u)});var O=Z(P);X(O,()=>r.children),G(P),E(t,P),Q(),h()}export{_0 as component};
